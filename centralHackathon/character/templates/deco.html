<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/deco.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>deco</title>
</head>
<body>
    
    <div class="deco-wrap">
        <button class="bak-button" type="button" onClick="history.go(-1)"><img src="{% static 'img/back-btn.svg' %}"> </button>
        
        <div class="char">
            <img class="char01-img" src="{% static 'images/character.png' %}">
        </div>
        <div class="box">
            <div class="nav-btn">
                <button class="nav-all" onclick="filterImages('all')">
                    <img class="decos-img" src="{% static 'img/deco/shop.svg' %}"> 
                    <img class="decos-img blue-btn" src="{% static 'img/deco/shop02.svg' %}">
                    <div class="white-btn"></div>
                </button>
                <button class="nav-cloth" onclick="filterImages('cloth')">
                    <img class="shop-img" src="{% static 'img/deco/bag.svg' %}"> 
                    <img class="shop-img blue-btn" src="{% static 'img/deco/bag02.svg' %}"> 
                    <div class="white-btn"></div>
                </button>
                <button class="nav-accessory" onclick="filterImages('accessory')">
                    <img class="jewel-img" src="{% static 'img/deco/jewel.svg' %}"> 
                    <img class="jewel-img blue-btn" src="{% static 'img/deco/jewel02.svg' %}">
                    <div class="white-btn"></div>
                </button>
                <button class="nav-eyes" onclick="filterImages('eyes')">
                    <img class="face-img" src="{% static 'img/deco/face.svg' %}"> 
                    <img class="face-img blue-btn" src="{% static 'img/deco/face02.svg' %}"> 
                    <div class="white-btn"></div>
                </button>
                <img class="nav-img" src="{% static 'img/deco/nav.svg' %}">
            </div>
            <div class="nav-box">
                <button class="one-box" type="button" onclick="toggleCharacterItem('hat', '{% static 'img/real_items/blue-hat.svg' %}', '{% static 'img/deco_items/blue-hat.svg' %}')"><img data-value="cloth" src="{% static 'img/deco_items/blue-hat.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('eyes', '{% static 'img/real_items/sunglass.svg' %}', '{% static 'img/deco_items/sunglass.svg' %}')"><img data-value="eyes" src="{% static 'img/deco_items/sunglass.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('accessory', '{% static 'img/real_items/red-heart.svg' %}', '{% static 'img/deco_items/red-heart.svg' %}')"><img data-value="accessory" src="{% static 'img/deco_items/red-heart.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('pet', '{% static 'img/real_items/monsil.svg' %}', '{% static 'img/deco_items/monsil.svg' %}')"><img data-value="cloth" src="{% static 'img/deco_items/monsil.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('accessory', '{% static 'images/flower.png' %}', '{% static 'img/deco_items/flower.svg' %}')"><img data-value="accessory" src="{% static 'img/deco_items/flower.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('bag', '{% static 'img/real_items/bag.svg' %}', '{% static 'img/deco_items/bag.svg' %}')"><img data-value="cloth" src="{% static 'img/deco_items/bag.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('hat', '{% static 'img/real_items/ribbon.svg' %}', '{% static 'img/deco_items/ribbon.svg' %}')"><img data-value="cloth" src="{% static 'img/deco_items/ribbon.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('eyes', '{% static 'img/real_items/red-eye.svg' %}', '{% static 'img/deco_items/red-eye.svg' %}')"><img data-value="eyes" src="{% static 'img/deco_items/red-eye.svg' %}"></button>
                <button class="one-box" type="button" onclick="toggleCharacterItem('eyes', '{% static 'img/real_items/blue-eye.svg' %}', '{% static 'img/deco_items/blue-eye.svg' %}')"><img data-value="eyes" src="{% static 'img/deco_items/blue-eye.svg' %}"></button>
            </div>
        </div>
    </div>

    <script>
        function filterImages(filter) {
            // .nav-box 내의 .one-box 요소들을 선택합니다.
            var boxes = document.querySelectorAll('.nav-box .one-box');
            // 모든 .one-box 요소를 필터링합니다.
            boxes.forEach(function(box) {
                var img = box.querySelector('img');
                // 필터가 'all'이거나, 이미지의 data-value가 필터와 일치하는 경우에는 box를 표시합니다.
                if (filter === 'all' || img.getAttribute('data-value') === filter) {
                    box.style.display = 'flex';
                } else {
                    box.style.display = 'none';
                }
            });
    
            // .nav-btn 내의 모든 버튼을 선택합니다.
            var buttons = document.querySelectorAll('.nav-btn button');
            // 각 버튼에 대해 작업을 수행합니다.
            buttons.forEach(function(button) {
                var buttonClass = button.className;
    
                // 버튼의 .white-btn 요소를 숨깁니다.
                var whiteBtn = button.querySelector('.white-btn');
                if (whiteBtn) {
                    if (buttonClass === `nav-${filter}`) {
                        whiteBtn.style.display = 'block';
                    } else {
                        whiteBtn.style.display = 'none';
                    }
                }
    
                // 버튼의 .blue-btn 요소를 선택합니다.
                var blueBtn = button.querySelector('.blue-btn');
                if (blueBtn) {
                    if (buttonClass === `nav-${filter}`) {
                        blueBtn.style.display = 'block';
                    } else {
                        blueBtn.style.display = 'none';
                    }
                }
            });
        }

        function toggleCharacterItem(type, src, decoSrc) {
            var charDiv = document.querySelector('.char');
            var existingItem = document.querySelector(`.char .char-${type}`);
            
            if (existingItem) {
                existingItem.remove();
            }

            var charDiv = document.querySelector('.char');
            var button = document.createElement('div');
            var div = document.createElement('div');
            var img = document.createElement('img');
            
            button.className = 'char-item';
            div.className = `char-${type}`;
            img.src = src;
            
            div.appendChild(img);
            button.appendChild(div);
            charDiv.appendChild(button);
            
        }
        
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>홈페이지</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/Home.css' %}">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="level-info">
                <span class="character-name">{{ character.name }}</span>
                <div class="level-bar-container">
                    <span class="level-text">LV. <span id="character-level">{{ character.level }}</span></span>
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="character-container">
            <!-- 캐릭터 이미지의 ID를 추가하여 JavaScript로 동적으로 변경 -->
            <img id="character-image" src="{% static 'images/default.png' %}" alt="Character" class="character">
        </div>

        <div class="footer">
            <div class="button" onclick="window.location.href='{% url 'history_page' %}'">
                <img src="{% static 'images/history.png' %}" alt="History Icon" class="icon history">
                <span>히스토리</span>
            </div>
            <div class="button" onclick="window.location.href='{% url 'timer_page' %}'">
                <img src="{% static 'images/timer.png' %}" alt="Timer Icon" class="icon timer">
                <span>타이머</span>
            </div>
            <div class="button" onclick="window.location.href='{% url 'deco' %}'">
                <img src="{% static 'images/dress.png' %}" alt="Dressroom Icon" class="icon dressroom">
                <span>드레스룸</span>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 서버에서 레벨과 경험치를 가져와서 사용
            var level = parseInt(document.getElementById('character-level').innerText, 10);
            var currentExperience = {{ current_experience }};
            var maxExperience = {{ max_experience }};
            var progressBar = document.getElementById('progress-bar');
            var characterImage = document.getElementById('character-image');

            // 진행 상황 바의 너비를 레벨에 따라 조정
            var progressWidth = (currentExperience / maxExperience) * 100;
            progressBar.style.width = progressWidth + '%';

            // 캐릭터 진화 설정
            if (level >= 30) {
                characterImage.src = "{% static 'images/adult.png' %}";
            } else if (level >= 5) {
                characterImage.src = "{% static 'images/child.png' %}";
            } else {
                characterImage.src = "{% static 'images/default.png' %}";
            }
        });
    </script>
</body>
</html>
